---
id: common-beautiful-and-understand
slug: /common-beautiful-and-understand
title: 如何写注释不会被未来的自己骂
date: 2024-11-08
authors: Hoo
tags: [知识]
keywords: [知识]
---

**写给未来自己的代码注释：如何写注释不会被未来的自己骂**

:::info
你有没有试过：半年后打开自己写的代码，翻了两行，脑子里只有一句话——“这谁写的？什么鬼？” 恭喜，你并不孤单。代码注释写得随意，真的会让未来的自己“气到冒烟”，尤其是当你发现自己当初是完全“佛系”地写下那些注释的时候。别慌，今天这篇文章就是为你而来！让我们聊聊怎么写注释，才能让未来的你少生气，少掉头发，少“自我怀疑”。
:::

------

### 1. **解释“为什么”，而不是“是什么”**

“什么是注释？”——很多人会这样写：

```python
a = 5  # 给 a 赋值 5
```

可是，看到这条注释的未来你可能会翻个白眼：代码已经写了 `a = 5`，你再写一遍有啥用？更重要的是告诉自己：**为什么 a 要等于 5**？比如这样写：

```python
a = 5  # 设置最大重试次数为 5，为了避免无限循环重试
```

这样，未来的自己就会知道，哦~这个 5 不是随便写的，是用来控制重试的。只写“是什么”就相当于用废话浪费未来的时间；写“为什么”则是用注释拯救未来的发际线。

### 2. **“神秘数字”必须解释**

有些数字是你当时顺手一写，觉得谁都能理解，结果未来的自己看到就觉得像在看神秘符号。这些常量又称为“魔法数字”，必须解释一下！

错误示例：

```python
discount = price * 0.07
```

正确示例：

```python
discount = price * 0.07  # 0.07 是固定折扣率，代表节假日7%的优惠
```

这段注释起码告诉未来的自己：0.07 是有来头的，不是你手滑打错了小数点。

### 3. **别让注释变成“自言自语”**

假设你写了这样的注释：

```python
count += 1  # 将 count 加 1
```

这种注释的作用几乎为零。代码已经说得很明白了，这种“自言自语”式注释完全浪费空间。**注释的意义在于提供代码看不到的信息**。真正需要注释的是：为什么要 `count + 1`？或者 `count + 1` 会触发什么效果？这样才会对未来的你有帮助。

### 4. **用简单语言解释复杂逻辑**

当代码逻辑有点复杂时，注释可以成为未来的自己找到思路的宝藏。比如当代码涉及多个步骤时，别让未来的自己玩拼图游戏。

```python
# 检查用户是否登录 -> 检查权限 -> 有权限则加载页面内容
if user.is_logged_in:
    if user.has_permission:
        show_page()
```

一句话梳理出流程，未来的你扫一眼就能理解代码的意图，而不是每行去猜测逻辑。

### 5. **标记潜在的“坑”**

有些代码容易出错或者你用了“不那么直白”的写法时，请为未来的自己打个“小心地雷”提示。例如：

```python
# 注意：这里要用 i-1，否则会导致数组越界错误
result = array[i-1]
```

标记出这种“雷区”，不仅能保护自己，还可能保护团队的其他成员不踩坑。

### 6. **解释 TODO，并且别“TODO”了就不管**

`TODO` 是我们最常见的注释之一，但很多人看到 `TODO` 以为“这是以后自己要做的事”，但后来忘了处理，留下一堆历史遗留问题。**解释一下 `TODO` 任务的内容、原因，别让未来的自己光看着‘TODO’干着急**。

错误示例：

```python
# TODO: 优化代码
```

正确示例：

```python
# TODO: 目前代码在大数据量时性能低，考虑用二分查找优化查询效率
```

不仅说明要优化，还简单提到怎么优化，未来的自己能直接上手，不用“从头想起”。

### 7. **幽默可以，但别跑题**

有时，为了让自己轻松点，我们会在注释里写段子。这其实无伤大雅，但**别让段子成为主要内容**，毕竟重点是让未来的自己理解代码。段子可以有，但别忘了**信息要准确**。

示例：

```python
# 这段代码曾让我怀疑人生，但它的作用是检测输入有效性
if is_valid_input(input):
    process(input)
```

这样既让未来的自己微笑，又清楚了代码的意图。

### 8. **“僵尸注释”要小心，保持更新**

重构、优化代码后，我们经常会忘记更新注释，导致注释和代码对不上，这就是“僵尸注释”。未来的自己遇到这样的注释，可能会因为误导信息而产生错觉。所以每次修改代码时，**记得检查相关注释是否需要同步更新**，不要留“过期提醒”。

### 9. **用适合的语言写注释**

很多人为了显得高端，会强行用英文写注释，结果搞出一堆“中式英文”。与其花心思写英文，还不如用自己最顺手的母语，把注释写得明白清晰。**注释是写给人看的，而不是给机器看的**，所以用熟悉的语言会更精准。

------

### 小总结：写注释时记住未来的你

注释是给未来的你留的“地图”，让未来的你在重温这段代码时不会迷路。**简单明了、解释清楚逻辑、标注雷区和“神秘数字”**，让未来的自己看起来顺畅、不需要绞尽脑汁去猜。

写好注释，你不仅会感谢现在的自己，未来的自己也会忍不住赞叹“我怎么这么贴心！”